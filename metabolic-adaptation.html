<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Why Your Metabolism Fights Back ‚Äî Explainer Blogs</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;0,900;1,700&family=Source+Serif+4:opsz,wght@8..60,300;8..60,400;8..60,600&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --bg:        #f6f3ee;
    --surface:   #ffffff;
    --surface2:  #faf8f5;
    --border:    #e2ddd6;
    --border2:   #ccc7be;
    --accent:    #bf3d0a;
    --accent-l:  #fef1eb;
    --gold:      #a87010;
    --gold-l:    #fdf7e6;
    --green:     #1a7554;
    --green-l:   #eaf4f0;
    --text:      #18140f;
    --muted:     #8a8178;
    --tag:       #eceae4;
  }
  * { margin:0; padding:0; box-sizing:border-box; }
  html { scroll-behavior:smooth; }
  body { background:var(--bg); color:var(--text); font-family:'Source Serif 4',Georgia,serif; font-weight:300; line-height:1.75; }

  /* ‚îÄ‚îÄ Header ‚îÄ‚îÄ */
  .site-header {
    background: rgba(246,243,238,0.93);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid var(--border);
    padding: 16px 6vw;
    position: sticky; top:0; z-index:50;
    display: flex; align-items:center; justify-content:space-between;
  }
  .logo { font-family:'Playfair Display',serif; font-size:18px; font-weight:900; color:var(--text); text-decoration:none; }
  .logo span { color:var(--accent); }
  .back-link { font-family:'DM Mono',monospace; font-size:11px; letter-spacing:0.1em; text-transform:uppercase; color:var(--muted); text-decoration:none; display:flex; align-items:center; gap:6px; transition:color 0.15s; }
  .back-link:hover { color:var(--accent); }

  /* ‚îÄ‚îÄ Article wrap ‚îÄ‚îÄ */
  .article { max-width:740px; margin:0 auto; padding:0 5vw 80px; }

  /* ‚îÄ‚îÄ Article header ‚îÄ‚îÄ */
  .art-header { padding:48px 0 32px; border-bottom:1px solid var(--border); margin-bottom:44px; }
  .art-tags { display:flex; gap:7px; flex-wrap:wrap; margin-bottom:16px; }
  .tag { font-family:'DM Mono',monospace; font-size:10px; letter-spacing:0.12em; text-transform:uppercase; color:var(--muted); background:var(--tag); padding:2px 9px; border-radius:100px; }
  .tag.accent { background:var(--accent-l); color:var(--accent); }
  .art-title { font-family:'Playfair Display',serif; font-size:clamp(26px,5vw,44px); font-weight:900; line-height:1.08; letter-spacing:-0.02em; color:var(--text); margin-bottom:14px; }
  .art-title em { font-style:italic; color:var(--accent); }
  .art-sub { font-size:17px; font-weight:300; color:var(--muted); line-height:1.6; margin-bottom:18px; }
  .art-meta { font-family:'DM Mono',monospace; font-size:11px; color:#b4ada4; letter-spacing:0.06em; display:flex; gap:14px; }

  /* ‚îÄ‚îÄ TOC ‚îÄ‚îÄ */
  .toc { background:var(--surface); border:1px solid var(--border); border-left:3px solid var(--text); border-radius:0 4px 4px 0; padding:22px 26px; margin-bottom:44px; }
  .toc-label { font-family:'DM Mono',monospace; font-size:10px; letter-spacing:0.18em; text-transform:uppercase; color:var(--muted); margin-bottom:12px; }
  .toc ol { padding-left:16px; }
  .toc li { margin-bottom:5px; }
  .toc a { font-size:15px; font-weight:400; color:var(--text); text-decoration:none; }
  .toc a:hover { color:var(--accent); text-decoration:underline; }
  .toc .sub { list-style:none; padding-left:12px; margin-top:3px; }
  .toc .sub li::before { content:'‚Ü≥ '; color:var(--muted); font-size:11px; }
  .toc .sub a { font-size:13px; color:var(--muted); }

  /* ‚îÄ‚îÄ Prose ‚îÄ‚îÄ */
  .prose h2 { font-family:'Playfair Display',serif; font-size:clamp(20px,3.2vw,28px); font-weight:700; line-height:1.15; color:var(--text); margin:52px 0 14px; padding-top:6px; border-top:2px solid var(--text); }
  .prose h3 { font-family:'Playfair Display',serif; font-size:19px; font-weight:700; font-style:italic; color:var(--text); margin:34px 0 10px; }
  .prose p { font-size:17px; font-weight:300; color:#3a3128; margin-bottom:18px; line-height:1.78; }
  .prose strong { font-weight:600; color:var(--text); }

  /* ‚îÄ‚îÄ Callouts ‚îÄ‚îÄ */
  .callout { border-radius:0 4px 4px 0; padding:18px 22px; margin:24px 0; font-size:15px; line-height:1.65; }
  .callout-lbl { font-family:'DM Mono',monospace; font-size:10px; letter-spacing:0.18em; text-transform:uppercase; font-weight:500; margin-bottom:7px; }
  .callout p { font-size:15px; color:inherit; margin:0; }
  .callout-def { background:var(--surface); border:1px solid var(--border); border-left:3px solid var(--text); color:var(--text); }
  .callout-def .callout-lbl { color:var(--muted); }
  .callout-ins { background:var(--accent-l); border-left:3px solid var(--accent); color:#5a1c05; }
  .callout-ins .callout-lbl { color:var(--accent); }
  .callout-warn { background:var(--gold-l); border-left:3px solid var(--gold); color:#4e3205; }
  .callout-warn .callout-lbl { color:var(--gold); }
  .callout-ok { background:var(--green-l); border-left:3px solid var(--green); color:#0d3d28; }
  .callout-ok .callout-lbl { color:var(--green); }

  /* ‚îÄ‚îÄ FITTR Tool card ‚îÄ‚îÄ */
  .tool-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 0;
    margin: 28px 0;
    overflow: hidden;
  }
  .tool-card-header {
    background: var(--text);
    padding: 14px 22px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
  }
  .tool-card-header h4 {
    font-family: 'DM Mono', monospace;
    font-size: 12px;
    font-weight: 500;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: #f6f3ee;
  }
  .tool-badge {
    font-family: 'DM Mono', monospace;
    font-size: 10px;
    background: var(--accent);
    color: white;
    padding: 2px 9px;
    border-radius: 100px;
    letter-spacing: 0.08em;
    text-transform: uppercase;
  }
  .tool-body { padding: 20px 22px; }
  .tool-body p { font-size: 14px; color: var(--muted); margin-bottom: 14px; font-weight:300; line-height:1.6; }
  .tool-what {
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 4px;
    padding: 14px 16px;
    margin-bottom: 14px;
    font-size: 14px;
    font-weight: 300;
    color: var(--text);
    line-height: 1.6;
  }
  .tool-what strong { font-weight:600; }
  .tool-link {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background: var(--accent);
    color: white;
    text-decoration: none;
    font-family: 'DM Mono', monospace;
    font-size: 12px;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    padding: 9px 18px;
    border-radius: 4px;
    transition: background 0.15s;
  }
  .tool-link:hover { background: #a83408; }
  .tool-note {
    display: inline-block;
    margin-left: 12px;
    font-family: 'DM Mono', monospace;
    font-size: 11px;
    color: var(--muted);
    letter-spacing: 0.04em;
  }

  /* Expected output box ‚Äî shows what value to use in simulator */
  .expected-box {
    background: var(--green-l);
    border: 1px solid #7dbfa8;
    border-radius: 4px;
    padding: 12px 16px;
    margin-top: 12px;
    display: flex;
    align-items: flex-start;
    gap: 10px;
    font-size: 13px;
    color: #0d3d28;
    line-height: 1.55;
  }
  .expected-box .ex-icon { font-size: 16px; flex-shrink:0; margin-top:1px; }
  .expected-box strong { font-weight:600; }

  /* ‚îÄ‚îÄ Interactive Card ‚îÄ‚îÄ */
  .sim-card { background:var(--surface); border:1px solid var(--border); border-radius:6px; padding:28px; margin:32px 0; }
  .sim-card h3 { font-family:'Playfair Display',serif; font-size:19px; font-weight:700; color:var(--text); margin-bottom:5px; }
  .sim-card .desc { font-size:14px; font-weight:300; color:var(--muted); margin-bottom:22px; line-height:1.55; }

  /* Sliders */
  .sl-row { display:flex; align-items:center; gap:12px; margin-bottom:13px; flex-wrap:wrap; }
  .sl-label { font-family:'DM Mono',monospace; font-size:11px; letter-spacing:0.08em; text-transform:uppercase; color:var(--muted); min-width:170px; }
  .sl-val { font-family:'DM Mono',monospace; font-size:13px; font-weight:500; color:var(--accent); min-width:90px; text-align:right; }
  input[type=range] { -webkit-appearance:none; flex:1; min-width:130px; height:3px; background:var(--border2); border-radius:2px; outline:none; cursor:pointer; }
  input[type=range]::-webkit-slider-thumb { -webkit-appearance:none; width:15px; height:15px; border-radius:50%; background:var(--accent); cursor:pointer; border:2px solid white; box-shadow:0 1px 3px rgba(191,61,10,0.25); }

  /* Canvas */
  canvas { width:100%; border-radius:4px; background:var(--surface2); display:block; margin-top:18px; border:1px solid var(--border); }

  /* Stats */
  .stat-row { display:flex; gap:10px; flex-wrap:wrap; margin-top:14px; }
  .stat { background:var(--surface2); border:1px solid var(--border); border-radius:4px; padding:12px 14px; flex:1; min-width:105px; }
  .stat-lbl { font-family:'DM Mono',monospace; font-size:10px; text-transform:uppercase; letter-spacing:0.1em; color:var(--muted); margin-bottom:5px; }
  .stat-val { font-family:'Playfair Display',serif; font-size:22px; font-weight:700; line-height:1; color:var(--text); }
  .stat-unit { font-family:'DM Mono',monospace; font-size:10px; color:var(--muted); margin-top:2px; }

  /* Body comp bars */
  .body-viz { display:grid; grid-template-columns:1fr 1fr 1fr; gap:14px; margin-top:18px; }
  @media(max-width:500px) { .body-viz { grid-template-columns:1fr 1fr; } }
  .bc-col { display:flex; flex-direction:column; align-items:center; gap:7px; }
  .bc-lbl { font-family:'DM Mono',monospace; font-size:10px; letter-spacing:0.08em; text-transform:uppercase; color:var(--muted); text-align:center; }
  .bc-bar { width:100%; height:230px; background:var(--surface2); border:1px solid var(--border); border-radius:4px; overflow:hidden; display:flex; flex-direction:column-reverse; }
  .bc-seg { width:100%; display:flex; align-items:center; justify-content:center; font-family:'DM Mono',monospace; font-size:9px; font-weight:500; color:rgba(0,0,0,0.55); letter-spacing:0.04em; transition:height 0.4s cubic-bezier(0.4,0,0.2,1); }
  .bc-note { font-family:'DM Mono',monospace; font-size:10px; color:var(--muted); text-align:center; line-height:1.4; }

  /* Phase indicator */
  .phase-row { display:flex; border:1px solid var(--border); border-radius:4px; overflow:hidden; margin:14px 0; }
  .ph { flex:1; padding:9px 5px; text-align:center; font-family:'DM Mono',monospace; font-size:10px; letter-spacing:0.06em; text-transform:uppercase; color:var(--muted); background:var(--surface2); border-right:1px solid var(--border); }
  .ph:last-child { border-right:none; }
  .ph.active { background:var(--accent); color:white; }

  /* Msg */
  .msg { border-radius:4px; padding:12px 16px; margin-top:14px; font-family:'DM Mono',monospace; font-size:12px; letter-spacing:0.03em; line-height:1.6; }
  .msg-ok { background:var(--green-l); border:1px solid #7dbfa8; color:#0d3d28; }
  .msg-warn { background:var(--gold-l); border:1px solid #d4a040; color:#4e3205; }
  .msg-info { background:var(--accent-l); border:1px solid #e8a080; color:#5a1c05; }

  /* Timeline */
  .tl { position:relative; margin:24px 0; }
  .tl::before { content:''; position:absolute; left:8px; top:6px; bottom:6px; width:1px; background:var(--border); }
  .tl-item { display:flex; gap:18px; margin-bottom:22px; }
  .tl-dot { width:16px; height:16px; border-radius:50%; border:2px solid; background:var(--bg); flex-shrink:0; margin-top:2px; position:relative; z-index:1; }
  .tl-title { font-family:'Playfair Display',serif; font-size:15px; font-weight:700; margin-bottom:3px; }
  .tl-text { font-size:14px; font-weight:300; color:var(--muted); line-height:1.6; }

  /* Strategy grid */
  .strategy-grid { display:grid; grid-template-columns:1fr 1fr; gap:12px; margin:22px 0; }
  @media(max-width:500px) { .strategy-grid { grid-template-columns:1fr; } }
  .strat { background:var(--surface); border:1px solid var(--border); border-radius:4px; padding:18px; }
  .strat h4 { font-family:'Playfair Display',serif; font-size:15px; font-weight:700; margin-bottom:6px; display:flex; align-items:center; gap:7px; }
  .strat p { font-size:13px; font-weight:300; color:var(--muted); margin:0; line-height:1.58; }

  /* Takeaways */
  .takeaways { list-style:none; margin:18px 0; counter-reset:tk; }
  .takeaways li { counter-increment:tk; display:flex; gap:14px; margin-bottom:14px; align-items:flex-start; }
  .takeaways li::before { content:counter(tk); font-family:'Playfair Display',serif; font-size:22px; font-weight:900; color:var(--accent); min-width:24px; line-height:1.2; }
  .takeaways li p { margin:0; font-size:16px; }

  /* Ref table */
  .meas-table { width:100%; border-collapse:collapse; font-family:'DM Mono',monospace; font-size:12px; margin-top:14px; overflow-x:auto; display:block; }
  .meas-table th { padding:8px 10px; text-align:left; color:var(--muted); font-weight:500; letter-spacing:0.08em; border-bottom:1px solid var(--border); }
  .meas-table td { padding:8px 10px; border-bottom:1px solid var(--border); }
  .meas-table tr:last-child td { border-bottom:none; }

  hr.divider { border:none; border-top:1px solid var(--border); margin:52px 0 0; }

  footer { border-top:1px solid var(--border); margin-top:60px; padding:22px 6vw; display:flex; align-items:center; justify-content:space-between; flex-wrap:wrap; gap:10px; }
  .foot-logo { font-family:'Playfair Display',serif; font-size:14px; font-weight:900; color:var(--text); text-decoration:none; }
  .foot-logo span { color:var(--accent); }
  .foot-r { font-family:'DM Mono',monospace; font-size:11px; color:var(--muted); letter-spacing:0.08em; }
</style>
</head>
<body>

<header class="site-header">
  <a href="index.html" class="logo">Explainer <span>Blogs</span></a>
  <a href="index.html" class="back-link">‚Üê All Explainers</a>
</header>

<div class="article">

  <!-- Header -->
  <div class="art-header">
    <div class="art-tags">
      <span class="tag accent">Fat Loss</span>
      <span class="tag">Metabolism</span>
      <span class="tag">Beginner-Friendly</span>
    </div>
    <h1 class="art-title">Why Your Metabolism<br><em>Fights Back</em></h1>
    <p class="art-sub">You cut calories, you lose weight, then it mysteriously stops. This isn't willpower ‚Äî it's biology. This explainer walks you through what BMR, TDEE, and metabolic adaptation actually mean, links you to free tools to calculate your own numbers, and lets you simulate exactly how your body responds over 24 weeks.</p>
    <div class="art-meta">
      <span>Feb 17, 2026</span>
      <span>8 min interactive read</span>
    </div>
  </div>

  <!-- TOC -->
  <div class="toc">
    <div class="toc-label">In this explainer</div>
    <ol>
      <li><a href="#basics">The basics: BMR, BMI, TDEE explained</a>
        <ul class="sub">
          <li><a href="#bmr">What is BMR and how to calculate yours</a></li>
          <li><a href="#tdee">What is TDEE and how to find yours</a></li>
          <li><a href="#bmi-bf">BMI vs body fat % ‚Äî and why the difference matters</a></li>
        </ul>
      </li>
      <li><a href="#adaptation">What is metabolic adaptation?</a></li>
      <li><a href="#sim">Simulate your deficit eroding over 24 weeks</a></li>
      <li><a href="#bodycomp">What are you actually losing ‚Äî fat or muscle?</a></li>
      <li><a href="#strategy">How to outsmart your metabolism</a></li>
      <li><a href="#refs">Measurement methods & further reading</a></li>
    </ol>
  </div>

  <div class="prose">

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         SECTION 1 ‚Äî BASICS
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <h2 id="basics">The Basics: BMR, TDEE, and BMI</h2>

    <p>Before understanding why fat loss stalls, you need to understand three numbers. Most people have heard these acronyms but couldn't define them clearly. That vagueness is exactly why so many diets fail ‚Äî people are flying blind.</p>

    <h3 id="bmr">BMR ‚Äî Basal Metabolic Rate</h3>

    <p><strong>BMR is the number of calories your body burns just to stay alive</strong> ‚Äî breathing, keeping your heart beating, maintaining body temperature, running your organs. No movement, no exercise, no digestion. Just existing.</p>

    <p>Think of it as the fuel cost of your car idling. Even if you lay completely still for 24 hours, you'd still burn your BMR in calories. For most adults, BMR is 1,400‚Äì2,000 kcal/day and accounts for roughly 60‚Äì70% of your total calorie burn.</p>

    <div class="callout callout-def">
      <div class="callout-lbl">How it's calculated</div>
      <p>The most accurate formula for modern adults is the <strong>Mifflin-St Jeor equation</strong>:<br><br>
      <strong>Men:</strong> BMR = (10 √ó kg) + (6.25 √ó cm) ‚àí (5 √ó age) + 5<br>
      <strong>Women:</strong> BMR = (10 √ó kg) + (6.25 √ó cm) ‚àí (5 √ó age) ‚àí 161<br><br>
      Example: A 28-year-old man, 75 kg, 175 cm ‚Üí BMR ‚âà 1,756 kcal/day</p>
    </div>

    <p>You don't need to calculate this by hand. Use the FITTR BMR calculator below ‚Äî it uses the same Mifflin-St Jeor formula. <strong>Note the number it gives you, because the simulator further down this page uses the same formula</strong>, so your results will match.</p>

    <!-- FITTR BMR Tool -->
    <div class="tool-card" id="bmr">
      <div class="tool-card-header">
        <h4>üî¢ Step 1 ‚Äî Calculate Your BMR</h4>
        <span class="tool-badge">Free Tool</span>
      </div>
      <div class="tool-body">
        <p>Enter your sex, age, weight, and height. The result is your BMR in kcal/day ‚Äî the baseline all other numbers build on.</p>
        <div class="tool-what">
          <strong>What you'll get:</strong> Your BMR in kcal/day ‚Äî for example, a 28-year-old man at 75 kg / 175 cm will get approximately <strong>1,756 kcal/day</strong>. This is what you'll use as the starting point in the simulator below.
        </div>
        <a class="tool-link" href="https://www.fittr.com/tools/bmr-calculator" target="_blank" rel="noopener">Open FITTR BMR Calculator ‚Üó</a>
        <span class="tool-note">free ¬∑ no sign-up needed</span>
        <div class="expected-box">
          <span class="ex-icon">üí°</span>
          <span>Once you have your BMR, multiply it by your activity factor (see TDEE below) to get your full daily burn. Write both numbers down ‚Äî you'll enter them into the simulator in Section 3.</span>
        </div>
      </div>
    </div>

    <h3 id="tdee">TDEE ‚Äî Total Daily Energy Expenditure</h3>

    <p>Your BMR is only what you burn at rest. <strong>TDEE is how many calories you actually burn in a full day</strong>, including all movement ‚Äî walking, workouts, climbing stairs, fidgeting, everything.</p>

    <p>TDEE = BMR √ó activity multiplier. The multiplier ranges from <strong>1.2</strong> (desk job, almost no exercise) to <strong>1.9</strong> (athlete training twice daily). The gap between eating at your TDEE and eating below it is your calorie deficit ‚Äî the engine of fat loss.</p>

    <div class="callout callout-ins">
      <div class="callout-lbl">The Key Insight</div>
      <p>Your TDEE is <em>not fixed</em>. As you sustain a deficit, your body reduces it ‚Äî burning fewer calories at rest, suppressing unconscious movement, downregulating hormones. This shrinking TDEE is the entire mechanism this article explains.</p>
    </div>

    <!-- FITTR TDEE Tool -->
    <div class="tool-card" id="tdee">
      <div class="tool-card-header">
        <h4>üìä Step 2 ‚Äî Find Your TDEE & Calorie Target</h4>
        <span class="tool-badge">Free Tool</span>
      </div>
      <div class="tool-body">
        <p>Select your activity level. The calculator will give you your maintenance calories (TDEE) and a suggested deficit target based on your goal.</p>
        <div class="tool-what">
          <strong>What you'll get:</strong> Your TDEE in kcal/day ‚Äî for example, that same 75 kg man at moderate activity will have a TDEE of roughly <strong>2,700 kcal/day</strong>. A 500 kcal deficit = eating <strong>2,200 kcal/day</strong>. This is the "Daily intake" value for the simulator.
        </div>
        <a class="tool-link" href="https://www.fittr.com/tools/bmr-calculator" target="_blank" rel="noopener">Open FITTR BMR/TDEE Calculator ‚Üó</a>
        <span class="tool-note">TDEE shown on same page after BMR</span>
        <div class="expected-box">
          <span class="ex-icon">üí°</span>
          <span>The deficit column in the simulator assumes you're eating 300‚Äì600 kcal below this TDEE number. If your TDEE is 2,700 and you eat 2,200, that's a 500 kcal deficit ‚Äî a good starting point for most people.</span>
        </div>
      </div>
    </div>

    <h3 id="bmi-bf">BMI vs Body Fat % ‚Äî Why the Difference Matters</h3>

    <p><strong>BMI</strong> (Body Mass Index) is your weight (kg) divided by height squared (m¬≤). It's a quick population-level screening tool ‚Äî but it has a well-known flaw: <strong>it cannot distinguish fat from muscle.</strong> A lean 85 kg bodybuilder and an 85 kg sedentary person have identical BMIs but completely different health profiles.</p>

    <p><strong>Body fat %</strong> is what actually matters for health and aesthetics. It tells you what fraction of your weight is fat tissue. The rest ‚Äî muscle, bone, organs, water ‚Äî is your lean mass, which is what you want to protect during fat loss.</p>

    <div class="callout callout-warn">
      <div class="callout-lbl">‚ö† Why This Matters Practically</div>
      <p>Someone who loses 10 kg through crash dieting might drop from 30% body fat to 28% ‚Äî not much improvement ‚Äî because 40‚Äì50% of their "weight loss" came from muscle, not fat. The body composition simulator later in this page shows exactly this effect.</p>
    </div>

    <!-- Body fat reference table -->
    <table class="meas-table">
      <tr>
        <th>Category</th><th>Men</th><th>Women</th>
      </tr>
      <tr>
        <td style="color:var(--green)">Essential fat</td><td>2‚Äì5%</td><td>10‚Äì13%</td>
      </tr>
      <tr>
        <td style="color:var(--green)">Athletic</td><td>6‚Äì13%</td><td>14‚Äì20%</td>
      </tr>
      <tr>
        <td style="color:var(--gold)">Fitness</td><td>14‚Äì17%</td><td>21‚Äì24%</td>
      </tr>
      <tr>
        <td style="color:var(--gold)">Acceptable</td><td>18‚Äì24%</td><td>25‚Äì31%</td>
      </tr>
      <tr>
        <td style="color:var(--accent)">Obese</td><td>25%+</td><td>32%+</td>
      </tr>
    </table>

    <!-- FITTR Body Fat Tool -->
    <div class="tool-card" id="bmi-bf" style="margin-top:24px">
      <div class="tool-card-header">
        <h4>‚öñÔ∏è Step 3 ‚Äî Estimate Your Body Fat %</h4>
        <span class="tool-badge">Free Tool</span>
      </div>
      <div class="tool-body">
        <p>Use FITTR's body fat calculator. It uses the US Navy tape-measure method (waist, neck, and hip measurements) ‚Äî more informative than BMI alone. You'll need a measuring tape.</p>
        <div class="tool-what">
          <strong>What you'll get:</strong> An estimated body fat % ‚Äî for example, a 75 kg man with a 84 cm waist, 38 cm neck, and 175 cm height will get approximately <strong>20‚Äì22%</strong> body fat. Use this as the "Starting body fat %" in the body composition simulator below.
        </div>
        <a class="tool-link" href="https://www.fittr.com/tools/body-fat-calculator" target="_blank" rel="noopener">Open FITTR Body Fat Calculator ‚Üó</a>
        <span class="tool-note">free ¬∑ takes ~2 min with a tape measure</span>
        <div class="expected-box">
          <span class="ex-icon">üí°</span>
          <span>The body composition visualiser below uses body fat % as its input. Enter the number from this tool into the "Starting body fat %" slider to get a personalised picture of what you're actually losing.</span>
        </div>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         SECTION 2 ‚Äî ADAPTATION
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <hr class="divider">
    <h2 id="adaptation">What Is Metabolic Adaptation?</h2>

    <p>Now that you have your numbers, here's the part most diet culture never explains: <strong>those numbers change when you diet.</strong></p>

    <p>Your body interprets a sustained calorie deficit as a famine. Not metaphorically ‚Äî your hypothalamus genuinely cannot distinguish your carefully planned diet from a prehistoric food shortage. Its single goal is survival. So it responds accordingly.</p>

    <div class="tl">
      <div class="tl-item">
        <div class="tl-dot" style="border-color:var(--green)"></div>
        <div>
          <div class="tl-title" style="color:var(--green)">Week 1‚Äì2: Fast but misleading progress</div>
          <div class="tl-text">Glycogen (stored carbs) depletes. Each gram holds ~3g of water, so you lose 1‚Äì3 kg quickly. Real and motivating ‚Äî but mostly water, not fat.</div>
        </div>
      </div>
      <div class="tl-item">
        <div class="tl-dot" style="border-color:var(--gold)"></div>
        <div>
          <div class="tl-title" style="color:var(--gold)">Week 3‚Äì5: Hunger hormones shift</div>
          <div class="tl-text"><strong>Leptin</strong> (the "I'm full" signal) drops as fat cells shrink. <strong>Ghrelin</strong> (the "I'm hungry" signal) rises. You start thinking about food more constantly ‚Äî this is physiological, not weakness.</div>
        </div>
      </div>
      <div class="tl-item">
        <div class="tl-dot" style="border-color:var(--accent)"></div>
        <div>
          <div class="tl-title" style="color:var(--accent)">Week 6‚Äì10: Your TDEE quietly shrinks</div>
          <div class="tl-text">Resting metabolic rate drops 15‚Äì25%. Your brain reduces <strong>NEAT</strong> (Non-Exercise Activity Thermogenesis) ‚Äî the calories you burn fidgeting, pacing, standing, gesturing. You sit a little more, move a little less, without noticing. This alone can close 200‚Äì400 kcal of your deficit.</div>
        </div>
      </div>
      <div class="tl-item">
        <div class="tl-dot" style="border-color:var(--muted)"></div>
        <div>
          <div class="tl-title" style="color:var(--muted)">Week 10+: The plateau</div>
          <div class="tl-text">Your adapted TDEE has converged near your calorie intake. The deficit you created has been closed by your own body. The scale stops moving. This is not a willpower failure ‚Äî it is textbook physiology.</div>
        </div>
      </div>
    </div>

    <div class="callout callout-warn">
      <div class="callout-lbl">‚ö† The Crash Diet Trap</div>
      <p>Cutting to 1,200 kcal/day doesn't just cause faster adaptation ‚Äî it accelerates muscle loss. With less muscle, your BMR drops further and <em>stays lower</em> even after the diet ends. This is why people frequently regain weight faster than they lost it after extreme restriction.</p>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         SECTION 3 ‚Äî SIMULATION
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <hr class="divider">
    <h2 id="sim">Simulate: Watch Your Deficit Erode Over 24 Weeks</h2>

    <p>Use the sliders to model your own situation. The orange line is your TDEE adapting downward over time ‚Äî using the same Mifflin-St Jeor formula as the FITTR BMR tool above, so the starting numbers match. The blue dashed line is your calorie intake. The shrinking green gap between them is your real deficit.</p>

    <div class="callout callout-def">
      <div class="callout-lbl">How to use this with FITTR</div>
      <p>Set <strong>Body weight</strong> to match what you entered in the BMR calculator. Set <strong>Daily intake</strong> to the deficit target FITTR's TDEE calculator gave you. Set <strong>Activity level</strong> to match your selection there. The starting TDEE shown will match what FITTR showed you.</p>
    </div>

    <div class="sim-card">
      <h3>Deficit Erosion Simulator</h3>
      <p class="desc">The starting TDEE is calculated using Mifflin-St Jeor ‚Äî the same formula used by FITTR's BMR calculator, so your numbers will match directly.</p>

      <div class="sl-row">
        <span class="sl-label">Body weight (kg)</span>
        <input type="range" id="sW" min="50" max="130" value="75" oninput="runSim()">
        <span class="sl-val" id="sWv">75 kg</span>
      </div>
      <div class="sl-row">
        <span class="sl-label">Daily intake (kcal)</span>
        <input type="range" id="sC" min="1000" max="3200" value="2200" step="50" oninput="runSim()">
        <span class="sl-val" id="sCv">2,200 kcal</span>
      </div>
      <div class="sl-row">
        <span class="sl-label">Activity level</span>
        <input type="range" id="sA" min="1" max="5" value="3" step="1" oninput="runSim()">
        <span class="sl-val" id="sAv">Moderate</span>
      </div>
      <div class="sl-row">
        <span class="sl-label">Protein intake (g/day)</span>
        <input type="range" id="sP" min="50" max="250" value="120" step="5" oninput="runSim()">
        <span class="sl-val" id="sPv">120 g</span>
      </div>

      <canvas id="simCanvas" height="260"></canvas>

      <div class="stat-row">
        <div class="stat">
          <div class="stat-lbl">Starting TDEE</div>
          <div class="stat-val" id="sTDEE">‚Äî</div>
          <div class="stat-unit">kcal/day</div>
        </div>
        <div class="stat">
          <div class="stat-lbl">TDEE at week 12</div>
          <div class="stat-val" id="sTDEE12" style="color:var(--gold)">‚Äî</div>
          <div class="stat-unit">kcal/day (adapted)</div>
        </div>
        <div class="stat">
          <div class="stat-lbl">Real deficit wk 12</div>
          <div class="stat-val" id="sRealDef" style="color:var(--green)">‚Äî</div>
          <div class="stat-unit">kcal/day</div>
        </div>
        <div class="stat">
          <div class="stat-lbl">Est. fat lost 24 wks</div>
          <div class="stat-val" id="sFatLost" style="color:var(--accent)">‚Äî</div>
          <div class="stat-unit">kg</div>
        </div>
      </div>

      <div class="msg msg-ok" id="simMsg">‚Äî</div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         SECTION 4 ‚Äî BODY COMP
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <hr class="divider">
    <h2 id="bodycomp">What Are You Actually Losing ‚Äî Fat or Muscle?</h2>

    <p>Here's what diet culture glosses over: <strong>weight lost is not the same as fat lost.</strong> In a deficit, you lose a combination of fat, muscle, water, and glycogen. The ratio depends almost entirely on two variables: protein intake and resistance training.</p>

    <p>Lose weight without enough protein and without lifting weights, and 30‚Äì50% of the weight you lose can come from muscle. You end up lighter, but with a higher body fat percentage than you started with ‚Äî and a slower metabolism to boot.</p>

    <div class="callout callout-def">
      <div class="callout-lbl">How to use this with your body fat number</div>
      <p>Set <strong>Starting body fat %</strong> to the number you got from the FITTR body fat calculator. The "Before" bar will show your current composition. Adjust protein and training to see how they change what you actually lose.</p>
    </div>

    <div class="sim-card">
      <h3>Body Composition Simulator</h3>
      <p class="desc">Enter your body fat % from the FITTR tool. Compare three scenarios: your current approach vs an optimised approach (high protein + resistance training).</p>

      <div class="sl-row">
        <span class="sl-label">Starting body fat %</span>
        <input type="range" id="bF" min="10" max="45" value="22" oninput="runBC()">
        <span class="sl-val" id="bFv">22%</span>
      </div>
      <div class="sl-row">
        <span class="sl-label">Weeks of dieting</span>
        <input type="range" id="bW" min="4" max="24" value="12" oninput="runBC()">
        <span class="sl-val" id="bWv">12 weeks</span>
      </div>
      <div class="sl-row">
        <span class="sl-label">Protein (g/day)</span>
        <input type="range" id="bP" min="50" max="250" value="100" step="5" oninput="runBC()">
        <span class="sl-val" id="bPv">100 g</span>
      </div>
      <div class="sl-row">
        <span class="sl-label">Resistance training?</span>
        <input type="range" id="bL" min="0" max="1" value="0" step="1" oninput="runBC()">
        <span class="sl-val" id="bLv">No</span>
      </div>

      <div class="body-viz">
        <div class="bc-col">
          <div class="bc-lbl">Before</div>
          <div class="bc-bar" id="bcBefore"></div>
          <div class="bc-note" id="bcBeforeNote"></div>
        </div>
        <div class="bc-col">
          <div class="bc-lbl">After ‚Äî Your Approach</div>
          <div class="bc-bar" id="bcAfter"></div>
          <div class="bc-note" id="bcAfterNote"></div>
        </div>
        <div class="bc-col">
          <div class="bc-lbl">After ‚Äî Optimised</div>
          <div class="bc-bar" id="bcOpt"></div>
          <div class="bc-note" id="bcOptNote"></div>
        </div>
      </div>

      <div style="display:flex;gap:12px;margin-top:10px;flex-wrap:wrap;font-family:'DM Mono',monospace;font-size:10px;color:var(--muted);">
        <span><span style="color:#4a90d9">‚ñ†</span> Water</span>
        <span><span style="color:#a09f9e">‚ñ†</span> Bone</span>
        <span><span style="color:#7c5cbf">‚ñ†</span> Organs</span>
        <span><span style="color:#c94060">‚ñ†</span> Muscle</span>
        <span><span style="color:#d96840">‚ñ†</span> Fat</span>
      </div>

      <div class="msg msg-warn" id="bcMsg">‚Äî</div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         SECTION 5 ‚Äî STRATEGY
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <hr class="divider">
    <h2 id="strategy">How to Outsmart Your Metabolism</h2>

    <p>Understanding adaptation means you can plan around it. These six strategies are backed by the strongest research on body recomposition.</p>

    <div class="strategy-grid">
      <div class="strat">
        <h4>üîÅ Diet Breaks</h4>
        <p>Every 6‚Äì8 weeks, eat at maintenance for 1‚Äì2 weeks. This partially resets leptin, slows adaptation, and lets the next cut start from a higher metabolic rate.</p>
      </div>
      <div class="strat">
        <h4>üèãÔ∏è Lift Weights</h4>
        <p>Resistance training is the single strongest signal to preserve muscle during a deficit. Without it, your body views muscle as expendable fuel.</p>
      </div>
      <div class="strat">
        <h4>ü•© 1.6‚Äì2.2 g Protein/kg</h4>
        <p>High protein is muscle-sparing, satiating, and has a 20‚Äì30% thermic effect ‚Äî your body burns 20‚Äì30% of protein calories just digesting it.</p>
      </div>
      <div class="strat">
        <h4>üìâ Modest Deficit (300‚Äì500 kcal)</h4>
        <p>A 400 kcal deficit for 5 months loses more real fat than a 1,200 kcal crash for 6 weeks that ends in rebound. Consistency beats extremism.</p>
      </div>
      <div class="strat">
        <h4>üö∂ Protect Your NEAT</h4>
        <p>Your brain suppresses NEAT unconsciously, so consciously replace it. Aim for 8,000‚Äì10,000 steps/day regardless of gym sessions.</p>
      </div>
      <div class="strat">
        <h4>üò¥ Prioritise Sleep</h4>
        <p>One week of 5‚Äì6 hour sleep raises ghrelin by 28%, drops leptin by 18%, and spikes cortisol ‚Äî all driving muscle loss and fat storage.</p>
      </div>
    </div>

    <!-- Optimal deficit tool -->
    <div class="sim-card">
      <h3>Deficit Trade-off Tool</h3>
      <p class="desc">See how deficit size trades off against muscle risk, adaptation speed, and sustainability. Move the slider to find your balance.</p>

      <div class="sl-row">
        <span class="sl-label">Daily calorie deficit</span>
        <input type="range" id="dS" min="150" max="1200" value="500" step="50" oninput="runDef()">
        <span class="sl-val" id="dSv">500 kcal/day</span>
      </div>

      <div class="phase-row">
        <div class="ph" id="ph1">Mild<br><span style="font-size:9px;opacity:0.7">150‚Äì350</span></div>
        <div class="ph" id="ph2">Moderate<br><span style="font-size:9px;opacity:0.7">350‚Äì600</span></div>
        <div class="ph" id="ph3">Aggressive<br><span style="font-size:9px;opacity:0.7">600‚Äì900</span></div>
        <div class="ph" id="ph4">Extreme<br><span style="font-size:9px;opacity:0.7">900+</span></div>
      </div>

      <div class="stat-row">
        <div class="stat">
          <div class="stat-lbl">Fat loss rate</div>
          <div class="stat-val" id="dFat" style="color:var(--green)">‚Äî</div>
          <div class="stat-unit">kg per week</div>
        </div>
        <div class="stat">
          <div class="stat-lbl">Muscle risk</div>
          <div class="stat-val" id="dMuscle">‚Äî</div>
          <div class="stat-unit">without lifting</div>
        </div>
        <div class="stat">
          <div class="stat-lbl">Adaptation</div>
          <div class="stat-val" id="dAdapt">‚Äî</div>
          <div class="stat-unit">metabolic slowdown</div>
        </div>
        <div class="stat">
          <div class="stat-lbl">Sustainability</div>
          <div class="stat-val" id="dSust">‚Äî</div>
          <div class="stat-unit">adherence rate</div>
        </div>
      </div>

      <div class="msg msg-ok" id="defMsg">‚Äî</div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         SECTION 6 ‚Äî REFERENCES
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <hr class="divider">
    <h2 id="refs">Measurement Methods & Further Reading</h2>

    <p>The FITTR tools are estimates ‚Äî excellent for understanding your baseline and the principles at play. For greater precision, here's how different measurement methods compare, and where to go deeper.</p>

    <h3>Body Fat Measurement ‚Äî Least to Most Accurate</h3>

    <table class="meas-table">
      <tr>
        <th>Method</th><th>Error Range</th><th>Notes</th>
      </tr>
      <tr>
        <td>Visual / mirror</td><td>¬±5‚Äì8%</td><td>Highly subjective</td>
      </tr>
      <tr>
        <td>BMI</td><td>¬±5‚Äì10%</td><td>Ignores muscle entirely</td>
      </tr>
      <tr>
        <td>Tape measure (Navy method)</td><td>¬±3‚Äì4%</td><td>What FITTR's body fat tool uses</td>
      </tr>
      <tr>
        <td>Smart scale / InBody</td><td>¬±2‚Äì4%</td><td>Varies with hydration ‚Äî test consistently</td>
      </tr>
      <tr>
        <td>Skinfold calipers</td><td>¬±2‚Äì3%</td><td>Accurate if done by trained person</td>
      </tr>
      <tr>
        <td style="color:var(--green)">Hydrostatic weighing</td><td style="color:var(--green)">¬±1‚Äì2%</td><td style="color:var(--green)">Gold standard</td>
      </tr>
      <tr>
        <td style="color:var(--green)">DEXA scan</td><td style="color:var(--green)">¬±1%</td><td style="color:var(--green)">Gold standard + regional fat map. Available at hospitals and sports clinics.</td>
      </tr>
    </table>

    <h3>All FITTR Tools Referenced</h3>

    <div class="callout callout-def">
      <div class="callout-lbl">Free tools from FITTR</div>
      <p>
        <strong>BMR Calculator</strong> ‚Üí <a href="https://www.fittr.com/tools/bmr-calculator" target="_blank" style="color:var(--accent)">fittr.com/tools/bmr-calculator</a><br>
        Calculates your resting metabolic rate using Mifflin-St Jeor. Same formula as the simulator on this page.<br><br>
        <strong>Body Fat Calculator</strong> ‚Üí <a href="https://www.fittr.com/tools/body-fat-calculator" target="_blank" style="color:var(--accent)">fittr.com/tools/body-fat-calculator</a><br>
        Estimates body fat % using the US Navy tape-measure method. Use this number in the body composition simulator above.
      </p>
    </div>

    <h3>Further Reading</h3>

    <div class="callout callout-def">
      <div class="callout-lbl">Credible sources</div>
      <p>
        <strong>Examine.com ‚Äî Fat Loss</strong> ‚Üí <a href="https://examine.com/topics/fat-loss/" target="_blank" style="color:var(--accent)">examine.com/topics/fat-loss</a><br>
        Every claim is cited from peer-reviewed research. No supplements to sell, no affiliate bias.<br><br>
        <strong>Metabolic Adaptation research review</strong> ‚Äî <em>M√ºller et al., 2015, European Journal of Nutrition</em> ‚Äî foundational paper on how BMR changes during caloric restriction.<br><br>
        <strong>NEAT research</strong> ‚Äî <em>Levine et al., 2005, Science</em> ‚Äî the paper that quantified how spontaneous physical activity can vary by 2,000 kcal/day between individuals.
      </p>
    </div>

    <!-- Takeaways -->
    <hr class="divider">
    <h2>Three Things to Remember</h2>

    <ul class="takeaways">
      <li><p><strong>The plateau is physiology, not failure.</strong> Metabolic adaptation is a survival response hardwired into your biology. Knowing it exists lets you plan around it ‚Äî with diet breaks, higher protein, intentional NEAT ‚Äî instead of blaming yourself and quitting.</p></li>
      <li><p><strong>Protein and lifting change the entire equation.</strong> 1.6‚Äì2.2 g protein per kg bodyweight, combined with resistance training, shifts weight loss heavily toward fat and away from muscle. This is the main variable separating people who look better after a cut from those who just look smaller.</p></li>
      <li><p><strong>Slower is actually faster.</strong> A 400 kcal deficit sustained for five months loses more real fat ‚Äî and keeps more muscle ‚Äî than a 1,200 kcal crash for six weeks that ends in rebound. Consistency compounds. Extremism doesn't.</p></li>
    </ul>

  </div><!-- /prose -->
</div><!-- /article -->

<footer>
  <a href="index.html" class="foot-logo">Explainer <span>Blogs</span></a>
  <div class="foot-r">by Suyash Pradhan</div>
</footer>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê JAVASCRIPT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<script>
const $ = id => document.getElementById(id);
const fmt = n => Math.round(n).toLocaleString('en-IN');

// Mifflin-St Jeor ‚Äî same formula as FITTR BMR calculator
// Using a neutral "average" person profile since user hasn't input sex/height/age here
// Default: male, 28yo, 172cm ‚Äî user sets their weight via slider
function mifflin(wt) {
  // Male, 28, 172cm ‚Äî representative; scales linearly with weight
  return 10 * wt + 6.25 * 172 - 5 * 28 + 5;
}

const actLabels = ['Sedentary','Light','Moderate','Active','Very Active'];
const actMults  = [1.2, 1.375, 1.55, 1.725, 1.9];

// ‚îÄ‚îÄ Simulator ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function runSim() {
  const wt  = +$('sW').value;
  const cal = +$('sC').value;
  const ai  = +$('sA').value - 1;
  const pro = +$('sP').value;

  $('sWv').textContent = wt + ' kg';
  $('sCv').textContent = fmt(cal) + ' kcal';
  $('sAv').textContent = actLabels[ai];
  $('sPv').textContent = pro + ' g';

  const baseBMR  = mifflin(wt);
  const baseTDEE = Math.round(baseBMR * actMults[ai]);
  const pFac = Math.min(1, (pro - 50) / 200); // 0‚Äì1
  const maxDrop = 0.22 - pFac * 0.08; // 14‚Äì22% max TDEE drop

  const WEEKS = 24;
  const tdeeArr = [];
  let cumFat = 0;

  for (let w = 0; w <= WEEKS; w++) {
    const frac = Math.min(maxDrop, maxDrop * (1 - Math.exp(-w / 8)));
    const adapted = Math.round(baseTDEE * (1 - frac));
    tdeeArr.push(adapted);
    if (w > 0) {
      const def = Math.max(0, adapted - cal);
      cumFat += (def * 7) / 7700;
    }
  }

  drawChart(WEEKS, baseTDEE, cal, tdeeArr);

  const realDef = Math.max(0, tdeeArr[12] - cal);
  $('sTDEE').textContent    = fmt(baseTDEE);
  $('sTDEE12').textContent  = fmt(tdeeArr[12]);
  $('sRealDef').textContent = fmt(realDef);
  $('sFatLost').textContent = cumFat.toFixed(1);

  const msg = $('simMsg');
  if (realDef < 60) {
    msg.className = 'msg msg-warn';
    msg.textContent = '‚ö† By week 12 your real deficit has nearly closed. Without a diet break or increased activity, fat loss will halt. Consider a 1‚Äì2 week diet break around week 6 to partially reset adaptation.';
  } else if (realDef < 250) {
    msg.className = 'msg msg-warn';
    msg.textContent = `‚ö† Real deficit at week 12 is only ${fmt(realDef)} kcal ‚Äî significantly eroded. Try increasing protein (150+ g/day) to slow adaptation, or add a diet break at week 6.`;
  } else {
    msg.className = 'msg msg-ok';
    msg.textContent = `‚úì Real deficit at week 12 is still ${fmt(realDef)} kcal. Higher protein is slowing adaptation. Keep protein high and consider a 1-week diet break around week 8 to sustain progress.`;
  }
}

function drawChart(weeks, baseTDEE, intake, tdeeArr) {
  const canvas = $('simCanvas');
  const dpr = window.devicePixelRatio || 1;
  const W = canvas.parentElement.clientWidth - 56;
  canvas.style.width = '100%';
  canvas.style.height = '260px';
  canvas.width  = W * dpr;
  canvas.height = 260 * dpr;
  const ctx = canvas.getContext('2d');
  ctx.scale(dpr, dpr);

  const pad = { t:24, r:14, b:36, l:54 };
  const pW = W - pad.l - pad.r;
  const pH = 260 - pad.t - pad.b;

  const mn = Math.min(...tdeeArr, intake) - 100;
  const mx = Math.max(...tdeeArr, intake) + 100;

  ctx.fillStyle = '#faf8f5';
  ctx.fillRect(0, 0, W, 260);

  const tx = w => pad.l + (w / weeks) * pW;
  const ty = v => pad.t + (1 - (v - mn) / (mx - mn)) * pH;

  // Grid lines
  for (let i = 0; i <= 4; i++) {
    const y = pad.t + (i / 4) * pH;
    ctx.strokeStyle = '#e2ddd6'; ctx.lineWidth = 1;
    ctx.beginPath(); ctx.moveTo(pad.l, y); ctx.lineTo(W - pad.r, y); ctx.stroke();
    ctx.fillStyle = '#8a8178'; ctx.font = '10px DM Mono,monospace'; ctx.textAlign = 'right';
    ctx.fillText(Math.round(mx - i / 4 * (mx - mn)), pad.l - 6, y + 3);
  }
  for (let w = 0; w <= weeks; w += 4) {
    ctx.fillStyle = '#8a8178'; ctx.font = '10px DM Mono,monospace'; ctx.textAlign = 'center';
    ctx.fillText('W' + w, tx(w), 260 - 8);
  }

  // Deficit fill
  ctx.beginPath();
  ctx.moveTo(tx(0), ty(tdeeArr[0]));
  for (let w = 1; w <= weeks; w++) ctx.lineTo(tx(w), ty(tdeeArr[w]));
  for (let w = weeks; w >= 0; w--) ctx.lineTo(tx(w), ty(Math.max(tdeeArr[w], intake)));
  ctx.closePath();
  ctx.fillStyle = 'rgba(26,117,84,0.08)';
  ctx.fill();

  // Intake line
  ctx.beginPath(); ctx.moveTo(tx(0), ty(intake)); ctx.lineTo(tx(weeks), ty(intake));
  ctx.strokeStyle = '#4a90d9'; ctx.lineWidth = 2;
  ctx.setLineDash([6, 4]); ctx.stroke(); ctx.setLineDash([]);

  // TDEE line
  ctx.beginPath(); ctx.moveTo(tx(0), ty(tdeeArr[0]));
  for (let w = 1; w <= weeks; w++) ctx.lineTo(tx(w), ty(tdeeArr[w]));
  ctx.strokeStyle = '#bf3d0a'; ctx.lineWidth = 2.5; ctx.stroke();

  // Labels
  ctx.font = '11px DM Mono,monospace'; ctx.textAlign = 'left';
  ctx.fillStyle = '#bf3d0a'; ctx.fillText('TDEE (adapting)', tx(1), ty(tdeeArr[1]) - 8);
  ctx.fillStyle = '#4a90d9'; ctx.fillText('Calorie intake', tx(1), ty(intake) + 14);
  const mw = Math.round(weeks / 2);
  ctx.fillStyle = '#1a7554';
  ctx.fillText('‚Üê real deficit', tx(mw), ty((tdeeArr[mw] + intake) / 2) + 4);
}

// ‚îÄ‚îÄ Body Composition ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function makeBar(elId, water, bone, organ, muscle, fat) {
  const el = $(elId); el.innerHTML = '';
  [
    { h: water,  bg: '#4a90d9', lbl: 'Water' },
    { h: bone,   bg: '#a09f9e', lbl: 'Bone' },
    { h: organ,  bg: '#7c5cbf', lbl: 'Organs' },
    { h: muscle, bg: '#c94060', lbl: 'Muscle' },
    { h: fat,    bg: '#d96840', lbl: 'Fat' },
  ].forEach(s => {
    const d = document.createElement('div');
    d.className = 'bc-seg';
    d.style.height = Math.max(0, s.h) + '%';
    d.style.background = s.bg;
    if (s.h > 7) d.textContent = s.lbl + ' ' + s.h.toFixed(0) + '%';
    el.appendChild(d);
  });
}

function runBC() {
  const fat  = +$('bF').value;
  const wks  = +$('bW').value;
  const pro  = +$('bP').value;
  const lift = +$('bL').value;

  $('bFv').textContent = fat + '%';
  $('bWv').textContent = wks + ' weeks';
  $('bPv').textContent = pro + ' g';
  $('bLv').textContent = lift ? 'Yes' : 'No';

  const bone  = 15, organ = 5;
  const water = Math.max(5, 60 - fat * 0.45);
  const musc  = Math.max(5, 100 - fat - water - bone - organ);

  makeBar('bcBefore', water, bone, organ, musc, fat);
  $('bcBeforeNote').textContent = `Fat ${fat}% ¬∑ Muscle ${musc.toFixed(0)}%`;

  const pFac = Math.min(1, (pro - 50) / 200);
  const fatLossWk = 0.38 + pFac * 0.08 + lift * 0.05;
  const muLossWk  = Math.max(0, 0.28 - pFac * 0.16 - lift * 0.12);
  const fatLostKg = Math.min(fat * 0.75, fatLossWk * wks);
  const muLostKg  = muLossWk * wks;
  const BW = 80; // assumed body weight for % conversion

  const fatA = Math.max(4, fat - fatLostKg / BW * 100);
  const muA  = Math.max(8, musc - muLostKg / BW * 100);
  const watA = Math.max(5, 100 - fatA - bone - organ - muA);
  makeBar('bcAfter', watA, bone, organ, muA, fatA);
  $('bcAfterNote').textContent = `Fat ${fatA.toFixed(1)}% ¬∑ Muscle ${muA.toFixed(0)}%`;

  const optFatLoss = Math.min(fat * 0.75, 0.5 * wks);
  const optMuChg   = lift ? 0.05 * wks : 0.03 * wks;
  const fatO = Math.max(4, fat - optFatLoss / BW * 100);
  const muO  = Math.max(8, Math.min(50, musc - optMuChg / BW * 100));
  const watO = Math.max(5, 100 - fatO - bone - organ - muO);
  makeBar('bcOpt', watO, bone, organ, muO, fatO);
  $('bcOptNote').textContent = `Fat ${fatO.toFixed(1)}% ¬∑ Muscle ${muO.toFixed(0)}%`;

  const muProp = Math.round((muLostKg / (muLostKg + fatLostKg + 0.001)) * 100);
  const bcMsg = $('bcMsg');
  if (pro < 100 && !lift) {
    bcMsg.className = 'msg msg-warn';
    bcMsg.textContent = `‚ö† With these inputs, ~${muProp}% of weight loss may come from muscle ‚Äî not fat. Increase protein to at least 120 g/day and add 2‚Äì3 resistance sessions per week to change this.`;
  } else if (pro >= 140 || lift) {
    bcMsg.className = 'msg msg-ok';
    bcMsg.textContent = `‚úì Good inputs. High protein and/or resistance training shifts the loss toward fat. Your body composition outcome will be meaningfully better than the average dieter.`;
  } else {
    bcMsg.className = 'msg msg-info';
    bcMsg.textContent = `‚Üí On the right track. Push protein to 150+ g/day or add resistance training to further improve the fat-to-muscle ratio of your weight loss.`;
  }
}

// ‚îÄ‚îÄ Deficit Tool ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function runDef() {
  const d = +$('dS').value;
  $('dSv').textContent = fmt(d) + ' kcal/day';

  ['ph1','ph2','ph3','ph4'].forEach(id => $(id).classList.remove('active'));
  if (d <= 350)      $('ph1').classList.add('active');
  else if (d <= 600) $('ph2').classList.add('active');
  else if (d <= 900) $('ph3').classList.add('active');
  else               $('ph4').classList.add('active');

  const rate = (d / 7700 * 7).toFixed(2);
  let muscle, adapt, sust, msg, cls;

  if (d <= 350) {
    muscle='Very Low'; adapt='Very Slow'; sust='Very High';
    msg='‚úì Mild deficit. Near-ideal fat-to-muscle ratio. Slightly slower but almost entirely fat loss. Best for already-lean individuals or those prioritising muscle retention.';
    cls='msg-ok';
  } else if (d <= 600) {
    muscle='Low'; adapt='Slow'; sust='High';
    msg='‚úì The research sweet spot. A 400‚Äì500 kcal deficit consistently delivers the best body composition outcomes over 12+ weeks. Recommended for most people.';
    cls='msg-ok';
  } else if (d <= 900) {
    muscle='Moderate'; adapt='Moderate'; sust='Medium';
    msg='‚ö† Aggressive deficit. Faster initial results but significant muscle loss risk. Requires high protein (2 g/kg) and lifting to mitigate. Sustainable for 4‚Äì6 weeks max.';
    cls='msg-warn';
  } else {
    muscle='High'; adapt='Fast'; sust='Low';
    msg='‚ö† Crash diet range. Weight loss is mostly muscle and water. Triggers rapid metabolic adaptation. High probability of rebound within 6 months.';
    cls='msg-warn';
  }

  const gc = v => ['Very Low','Low','Slow','Very Slow','High','Very High'].includes(v) ? 'var(--green)' : ['Moderate','Medium'].includes(v) ? 'var(--gold)' : 'var(--accent)';

  $('dFat').textContent = rate; $('dFat').style.color = 'var(--green)';
  $('dMuscle').textContent = muscle; $('dMuscle').style.color = gc(muscle);
  $('dAdapt').textContent = adapt;   $('dAdapt').style.color = gc(adapt);
  $('dSust').textContent = sust;     $('dSust').style.color = gc(sust);
  const el = $('defMsg'); el.className = 'msg ' + cls; el.textContent = msg;
}

// ‚îÄ‚îÄ Init ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
window.addEventListener('load', () => { runSim(); runBC(); runDef(); });
window.addEventListener('resize', () => { clearTimeout(window._rt); window._rt = setTimeout(runSim, 150); });
</script>
</body>
</html>
